package fa.appcode.web.controller;

import fa.appcode.web.dto.*;
import fa.appcode.web.service.ScheduleSeatService;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.mock.mockito.MockBean;
import org.springframework.http.HttpStatus;
import org.springframework.http.MediaType;
import org.springframework.mock.web.MockHttpServletResponse;
import org.springframework.test.context.junit.jupiter.SpringExtension;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.test.web.servlet.MockMvc;

import java.math.BigDecimal;
import java.time.LocalDate;
import java.util.*;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.Mockito.when;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;

@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
class ScheduleSeatControllerTest {

    @Autowired
    private MockMvc mockMvc;

    @MockBean
    private ScheduleSeatService mockScheduleSeatService;

    /**
     * Author:DaoTQ1
     * This function find seat solid (Seat is booked by customer) to show status for other customer is know the seat is booked
     * Result: The test is pass, return List of seat is booked
     * @throws Exception
     */
    @Test
    void testCheckBookingSeat() throws Exception {
        // Setup

        // Configure ScheduleSeatService.getAllSeatBooking(...).
        final SeatDTO seatDTO = new SeatDTO();
        seatDTO.setSeatId(0);
        seatDTO.setSeatColumn("seatColumn");
        seatDTO.setSeatRow(0);
        seatDTO.setStatus((byte) 0b0);
        seatDTO.setSeatType(0);
        seatDTO.setSeatPrice(new BigDecimal("0.00"));
        seatDTO.setCinemaRoom(new CinemaRoomDTO(0, "roomName", new BigDecimal("0.00"), new BigDecimal("0.00"), 0, Arrays.asList(new MovieDTO(null, 0, "actor", "content", "director", 0.0f, LocalDate.of(2020, 1, 1), LocalDate.of(2020, 1, 1), "movieCompany", "version", "nameEng", "nameVN", "avatar", "image", Arrays.asList(new ScheduleMovieDTO(null, new ScheduleDTO(0, "time", Arrays.asList(), Arrays.asList(new ScheduleSeatDTO(0, null, null, 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList(new TicketDTO(null, null, null))))))), Arrays.asList(new TypeMovieDTO(null, new TypeDTO(0, "name", Arrays.asList()))), Arrays.asList(new TicketDTO(null, new ScheduleSeatDTO(0, null, new ScheduleDTO(0, "time", Arrays.asList(new ScheduleMovieDTO(null, null)), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList()), new InvoiceDTO(0, new AccountDTO(0, "email", "fullName", "gender", "identityCard", "image", "username", "password", "phoneNumber", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), LocalDate.of(2020, 1, 1), new RoleDTO(0, "roleName", Arrays.asList()), (byte) 0b0, Arrays.asList(new MemberDTO(0, 0, null))), 0, new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "movieName", LocalDate.of(2020, 1, 1), "scheduleShowTime", (byte) 0b0, new BigDecimal("0.00"), 0, "seat", Arrays.asList(), "customerName", "customerPhone", "customerIdentityCard", "memberId", new PromotionDTO(0, "detail", new BigDecimal("0.00"), new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "image", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "title", Arrays.asList()), Arrays.asList(new ScheduleSeatDTO(0, null, new ScheduleDTO(0, "time", Arrays.asList(), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList()))))), Arrays.asList(new ScheduleSeatDTO(0, null, new ScheduleDTO(0, "time", Arrays.asList(new ScheduleMovieDTO(null, null)), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList(new TicketDTO(null, null, new InvoiceDTO(0, new AccountDTO(0, "email", "fullName", "gender", "identityCard", "image", "username", "password", "phoneNumber", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), LocalDate.of(2020, 1, 1), new RoleDTO(0, "roleName", Arrays.asList()), (byte) 0b0, Arrays.asList()), 0, new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "movieName", LocalDate.of(2020, 1, 1), "scheduleShowTime", (byte) 0b0, new BigDecimal("0.00"), 0, "seat", Arrays.asList(), "customerName", "customerPhone", "customerIdentityCard", "memberId", new PromotionDTO(0, "detail", new BigDecimal("0.00"), new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "image", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "title", Arrays.asList()), Arrays.asList()))))))), Arrays.asList(new SeatDTO())));
        final SeatDTO seatDTO1 = new SeatDTO();
        seatDTO1.setSeatId(0);
        seatDTO1.setSeatColumn("seatColumn");
        seatDTO1.setSeatRow(0);
        seatDTO1.setStatus((byte) 0b0);
        seatDTO1.setSeatType(0);
        seatDTO1.setSeatPrice(new BigDecimal("0.00"));
        seatDTO1.setCinemaRoom(new CinemaRoomDTO(0, "roomName", new BigDecimal("0.00"), new BigDecimal("0.00"), 0, Arrays.asList(new MovieDTO(null, 0, "actor", "content", "director", 0.0f, LocalDate.of(2020, 1, 1), LocalDate.of(2020, 1, 1), "movieCompany", "version", "nameEng", "nameVN", "avatar", "image", Arrays.asList(new ScheduleMovieDTO(null, new ScheduleDTO(0, "time", Arrays.asList(), Arrays.asList(new ScheduleSeatDTO(0, null, null, 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList(new TicketDTO(null, null, null))))))), Arrays.asList(new TypeMovieDTO(null, new TypeDTO(0, "name", Arrays.asList()))), Arrays.asList(new TicketDTO(null, new ScheduleSeatDTO(0, null, new ScheduleDTO(0, "time", Arrays.asList(new ScheduleMovieDTO(null, null)), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList()), new InvoiceDTO(0, new AccountDTO(0, "email", "fullName", "gender", "identityCard", "image", "username", "password", "phoneNumber", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), LocalDate.of(2020, 1, 1), new RoleDTO(0, "roleName", Arrays.asList()), (byte) 0b0, Arrays.asList(new MemberDTO(0, 0, null))), 0, new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "movieName", LocalDate.of(2020, 1, 1), "scheduleShowTime", (byte) 0b0, new BigDecimal("0.00"), 0, "seat", Arrays.asList(), "customerName", "customerPhone", "customerIdentityCard", "memberId", new PromotionDTO(0, "detail", new BigDecimal("0.00"), new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "image", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "title", Arrays.asList()), Arrays.asList(new ScheduleSeatDTO(0, null, new ScheduleDTO(0, "time", Arrays.asList(), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList()))))), Arrays.asList(new ScheduleSeatDTO(0, null, new ScheduleDTO(0, "time", Arrays.asList(new ScheduleMovieDTO(null, null)), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList(new TicketDTO(null, null, new InvoiceDTO(0, new AccountDTO(0, "email", "fullName", "gender", "identityCard", "image", "username", "password", "phoneNumber", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), LocalDate.of(2020, 1, 1), new RoleDTO(0, "roleName", Arrays.asList()), (byte) 0b0, Arrays.asList()), 0, new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "movieName", LocalDate.of(2020, 1, 1), "scheduleShowTime", (byte) 0b0, new BigDecimal("0.00"), 0, "seat", Arrays.asList(), "customerName", "customerPhone", "customerIdentityCard", "memberId", new PromotionDTO(0, "detail", new BigDecimal("0.00"), new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "image", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "title", Arrays.asList()), Arrays.asList()))))))), Arrays.asList(new SeatDTO())));
        final SeatDTO seatDTO2 = new SeatDTO();
        seatDTO2.setSeatId(0);
        seatDTO2.setSeatColumn("seatColumn");
        seatDTO2.setSeatRow(0);
        seatDTO2.setStatus((byte) 0b0);
        seatDTO2.setSeatType(0);
        seatDTO2.setSeatPrice(new BigDecimal("0.00"));
        seatDTO2.setCinemaRoom(new CinemaRoomDTO(0, "roomName", new BigDecimal("0.00"), new BigDecimal("0.00"), 0, Arrays.asList(new MovieDTO(null, 0, "actor", "content", "director", 0.0f, LocalDate.of(2020, 1, 1), LocalDate.of(2020, 1, 1), "movieCompany", "version", "nameEng", "nameVN", "avatar", "image", Arrays.asList(new ScheduleMovieDTO(null, new ScheduleDTO(0, "time", Arrays.asList(), Arrays.asList(new ScheduleSeatDTO(0, null, null, 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList(new TicketDTO(null, null, null))))))), Arrays.asList(new TypeMovieDTO(null, new TypeDTO(0, "name", Arrays.asList()))), Arrays.asList(new TicketDTO(null, new ScheduleSeatDTO(0, null, new ScheduleDTO(0, "time", Arrays.asList(new ScheduleMovieDTO(null, null)), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList()), new InvoiceDTO(0, new AccountDTO(0, "email", "fullName", "gender", "identityCard", "image", "username", "password", "phoneNumber", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), LocalDate.of(2020, 1, 1), new RoleDTO(0, "roleName", Arrays.asList()), (byte) 0b0, Arrays.asList(new MemberDTO(0, 0, null))), 0, new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "movieName", LocalDate.of(2020, 1, 1), "scheduleShowTime", (byte) 0b0, new BigDecimal("0.00"), 0, "seat", Arrays.asList(), "customerName", "customerPhone", "customerIdentityCard", "memberId", new PromotionDTO(0, "detail", new BigDecimal("0.00"), new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "image", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "title", Arrays.asList()), Arrays.asList(new ScheduleSeatDTO(0, null, new ScheduleDTO(0, "time", Arrays.asList(), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList()))))), Arrays.asList(new ScheduleSeatDTO(0, null, new ScheduleDTO(0, "time", Arrays.asList(new ScheduleMovieDTO(null, null)), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList(new TicketDTO(null, null, new InvoiceDTO(0, new AccountDTO(0, "email", "fullName", "gender", "identityCard", "image", "username", "password", "phoneNumber", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), LocalDate.of(2020, 1, 1), new RoleDTO(0, "roleName", Arrays.asList()), (byte) 0b0, Arrays.asList()), 0, new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "movieName", LocalDate.of(2020, 1, 1), "scheduleShowTime", (byte) 0b0, new BigDecimal("0.00"), 0, "seat", Arrays.asList(), "customerName", "customerPhone", "customerIdentityCard", "memberId", new PromotionDTO(0, "detail", new BigDecimal("0.00"), new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "image", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "title", Arrays.asList()), Arrays.asList()))))))), Arrays.asList(new SeatDTO())));
        final List<ScheduleSeatDTO> scheduleSeatDTOS = Arrays.asList(new ScheduleSeatDTO(0, new MovieDTO(new CinemaRoomDTO(0, "roomName", new BigDecimal("0.00"), new BigDecimal("0.00"), 0, Arrays.asList(), Arrays.asList(seatDTO)), 0, "actor", "content", "director", 0.0f, LocalDate.of(2020, 1, 1), LocalDate.of(2020, 1, 1), "movieCompany", "version", "nameEng", "nameVN", "avatar", "image", Arrays.asList(new ScheduleMovieDTO(null, new ScheduleDTO(0, "time", Arrays.asList(), Arrays.asList()))), Arrays.asList(new TypeMovieDTO(null, new TypeDTO(0, "name", Arrays.asList()))), Arrays.asList(new TicketDTO(null, null, new InvoiceDTO(0, new AccountDTO(0, "email", "fullName", "gender", "identityCard", "image", "username", "password", "phoneNumber", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), LocalDate.of(2020, 1, 1), new RoleDTO(0, "roleName", Arrays.asList()), (byte) 0b0, Arrays.asList(new MemberDTO(0, 0, null))), 0, new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "movieName", LocalDate.of(2020, 1, 1), "scheduleShowTime", (byte) 0b0, new BigDecimal("0.00"), 0, "seat", Arrays.asList(), "customerName", "customerPhone", "customerIdentityCard", "memberId", new PromotionDTO(0, "detail", new BigDecimal("0.00"), new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "image", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "title", Arrays.asList()), Arrays.asList()))), Arrays.asList()), new ScheduleDTO(0, "time", Arrays.asList(new ScheduleMovieDTO(new MovieDTO(new CinemaRoomDTO(0, "roomName", new BigDecimal("0.00"), new BigDecimal("0.00"), 0, Arrays.asList(), Arrays.asList(seatDTO1)), 0, "actor", "content", "director", 0.0f, LocalDate.of(2020, 1, 1), LocalDate.of(2020, 1, 1), "movieCompany", "version", "nameEng", "nameVN", "avatar", "image", Arrays.asList(), Arrays.asList(new TypeMovieDTO(null, new TypeDTO(0, "name", Arrays.asList()))), Arrays.asList(new TicketDTO(null, null, new InvoiceDTO(0, new AccountDTO(0, "email", "fullName", "gender", "identityCard", "image", "username", "password", "phoneNumber", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), LocalDate.of(2020, 1, 1), null, (byte) 0b0, Arrays.asList()), 0, new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "movieName", LocalDate.of(2020, 1, 1), "scheduleShowTime", (byte) 0b0, new BigDecimal("0.00"), 0, "seat", Arrays.asList(), "customerName", "customerPhone", "customerIdentityCard", "memberId", new PromotionDTO(0, "detail", new BigDecimal("0.00"), new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "image", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "title", Arrays.asList()), Arrays.asList()))), Arrays.asList()), null)), Arrays.asList()), 0, "seatColumn", 0, (byte) 0b0, 0, new BigDecimal("0.00"), Arrays.asList(new TicketDTO(new MovieDTO(new CinemaRoomDTO(0, "roomName", new BigDecimal("0.00"), new BigDecimal("0.00"), 0, Arrays.asList(), Arrays.asList(seatDTO2)), 0, "actor", "content", "director", 0.0f, LocalDate.of(2020, 1, 1), LocalDate.of(2020, 1, 1), "movieCompany", "version", "nameEng", "nameVN", "avatar", "image", Arrays.asList(new ScheduleMovieDTO(null, new ScheduleDTO(0, "time", Arrays.asList(), Arrays.asList()))), Arrays.asList(new TypeMovieDTO(null, new TypeDTO(0, "name", Arrays.asList()))), Arrays.asList(), Arrays.asList()), null, new InvoiceDTO(0, new AccountDTO(0, "email", "fullName", "gender", "identityCard", "image", "username", "password", "phoneNumber", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), LocalDate.of(2020, 1, 1), new RoleDTO(0, "roleName", Arrays.asList()), (byte) 0b0, Arrays.asList(new MemberDTO(0, 0, null))), 0, new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "movieName", LocalDate.of(2020, 1, 1), "scheduleShowTime", (byte) 0b0, new BigDecimal("0.00"), 0, "seat", Arrays.asList(), "customerName", "customerPhone", "customerIdentityCard", "memberId", new PromotionDTO(0, "detail", new BigDecimal("0.00"), new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "image", new GregorianCalendar(2019, Calendar.JANUARY, 1).getTime(), "title", Arrays.asList()), Arrays.asList())))));
        when(mockScheduleSeatService.getAllSeatBooking(LocalDate.of(2020, 1, 1), 0, 0)).thenReturn(scheduleSeatDTOS);

        // Run the test
        final MockHttpServletResponse response = mockMvc.perform(get("/api/scheduleSeat/checkBooking/2020-01-01/0/0", "date", 0, 0)
                .accept(MediaType.APPLICATION_JSON))
                .andReturn().getResponse();

        // Verify the results
        String expectedResult = "[{\"scheduleSeatId\":0,\"movie\":{\"cinemaRoom\":{\"id\":0,\"roomName\":\"roomName\",\"vipPrice\":0.00,\"normalPrice\":0.00,\"seatQuantity\":0,\"movies\":[],\"seats\":[{\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"cinemaRoom\":{\"id\":0,\"roomName\":\"roomName\",\"vipPrice\":0.00,\"normalPrice\":0.00,\"seatQuantity\":0,\"movies\":[{\"cinemaRoom\":null,\"id\":0,\"actor\":\"actor\",\"content\":\"content\",\"director\":\"director\",\"duration\":0.0,\"fromDate\":\"2020-01-01\",\"toDate\":\"2020-01-01\",\"movieCompany\":\"movieCompany\",\"version\":\"version\",\"nameEng\":\"nameEng\",\"nameVN\":\"nameVN\",\"avatar\":\"avatar\",\"image\":\"image\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[],\"scheduleSeats\":[{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":null,\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[{\"movie\":null,\"scheduleSeat\":null,\"invoice\":null}]}]}}],\"typeMovies\":[{\"movie\":null,\"type\":{\"id\":0,\"name\":\"name\",\"typeMovies\":[]}}],\"tickets\":[{\"movie\":null,\"scheduleSeat\":{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":null}],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[]},\"invoice\":{\"id\":0,\"account\":{\"id\":0,\"email\":\"email\",\"fullName\":\"fullName\",\"gender\":\"gender\",\"identityCard\":\"identityCard\",\"image\":\"image\",\"username\":\"username\",\"password\":\"password\",\"phoneNumber\":\"phoneNumber\",\"dateOfBirth\":\"2018-12-31T17:00:00.000+00:00\",\"registerDate\":\"2020-01-01\",\"role\":{\"id\":0,\"roleName\":\"roleName\",\"accounts\":[]},\"status\":0,\"members\":[{\"memberId\":0,\"score\":0,\"account\":null}]},\"addScore\":0,\"bookingDate\":\"2018-12-31T17:00:00.000+00:00\",\"movieName\":\"movieName\",\"scheduleShow\":\"2020-01-01\",\"scheduleShowTime\":\"scheduleShowTime\",\"status\":0,\"totalMoney\":0.00,\"userScore\":0,\"seat\":\"seat\",\"tickets\":[],\"customerName\":\"customerName\",\"customerPhone\":\"customerPhone\",\"customerIdentityCard\":\"customerIdentityCard\",\"memberId\":\"memberId\",\"promotion\":{\"id\":0,\"detail\":\"detail\",\"discountLevel\":0.00,\"endTime\":\"2018-12-31T17:00:00.000+00:00\",\"image\":\"image\",\"startTime\":\"2018-12-31T17:00:00.000+00:00\",\"title\":\"title\",\"invoices\":[]},\"scheduleSeats\":[{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[]}]}}],\"scheduleSeats\":[{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":null}],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[{\"movie\":null,\"scheduleSeat\":null,\"invoice\":{\"id\":0,\"account\":{\"id\":0,\"email\":\"email\",\"fullName\":\"fullName\",\"gender\":\"gender\",\"identityCard\":\"identityCard\",\"image\":\"image\",\"username\":\"username\",\"password\":\"password\",\"phoneNumber\":\"phoneNumber\",\"dateOfBirth\":\"2018-12-31T17:00:00.000+00:00\",\"registerDate\":\"2020-01-01\",\"role\":{\"id\":0,\"roleName\":\"roleName\",\"accounts\":[]},\"status\":0,\"members\":[]},\"addScore\":0,\"bookingDate\":\"2018-12-31T17:00:00.000+00:00\",\"movieName\":\"movieName\",\"scheduleShow\":\"2020-01-01\",\"scheduleShowTime\":\"scheduleShowTime\",\"status\":0,\"totalMoney\":0.00,\"userScore\":0,\"seat\":\"seat\",\"tickets\":[],\"customerName\":\"customerName\",\"customerPhone\":\"customerPhone\",\"customerIdentityCard\":\"customerIdentityCard\",\"memberId\":\"memberId\",\"promotion\":{\"id\":0,\"detail\":\"detail\",\"discountLevel\":0.00,\"endTime\":\"2018-12-31T17:00:00.000+00:00\",\"image\":\"image\",\"startTime\":\"2018-12-31T17:00:00.000+00:00\",\"title\":\"title\",\"invoices\":[]},\"scheduleSeats\":[]}}]}]}],\"seats\":[{\"seatId\":null,\"seatColumn\":null,\"seatRow\":null,\"status\":null,\"seatType\":null,\"seatPrice\":null,\"cinemaRoom\":null}]}}]},\"id\":0,\"actor\":\"actor\",\"content\":\"content\",\"director\":\"director\",\"duration\":0.0,\"fromDate\":\"2020-01-01\",\"toDate\":\"2020-01-01\",\"movieCompany\":\"movieCompany\",\"version\":\"version\",\"nameEng\":\"nameEng\",\"nameVN\":\"nameVN\",\"avatar\":\"avatar\",\"image\":\"image\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[],\"scheduleSeats\":[]}}],\"typeMovies\":[{\"movie\":null,\"type\":{\"id\":0,\"name\":\"name\",\"typeMovies\":[]}}],\"tickets\":[{\"movie\":null,\"scheduleSeat\":null,\"invoice\":{\"id\":0,\"account\":{\"id\":0,\"email\":\"email\",\"fullName\":\"fullName\",\"gender\":\"gender\",\"identityCard\":\"identityCard\",\"image\":\"image\",\"username\":\"username\",\"password\":\"password\",\"phoneNumber\":\"phoneNumber\",\"dateOfBirth\":\"2018-12-31T17:00:00.000+00:00\",\"registerDate\":\"2020-01-01\",\"role\":{\"id\":0,\"roleName\":\"roleName\",\"accounts\":[]},\"status\":0,\"members\":[{\"memberId\":0,\"score\":0,\"account\":null}]},\"addScore\":0,\"bookingDate\":\"2018-12-31T17:00:00.000+00:00\",\"movieName\":\"movieName\",\"scheduleShow\":\"2020-01-01\",\"scheduleShowTime\":\"scheduleShowTime\",\"status\":0,\"totalMoney\":0.00,\"userScore\":0,\"seat\":\"seat\",\"tickets\":[],\"customerName\":\"customerName\",\"customerPhone\":\"customerPhone\",\"customerIdentityCard\":\"customerIdentityCard\",\"memberId\":\"memberId\",\"promotion\":{\"id\":0,\"detail\":\"detail\",\"discountLevel\":0.00,\"endTime\":\"2018-12-31T17:00:00.000+00:00\",\"image\":\"image\",\"startTime\":\"2018-12-31T17:00:00.000+00:00\",\"title\":\"title\",\"invoices\":[]},\"scheduleSeats\":[]}}],\"scheduleSeats\":[]},\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[{\"movie\":{\"cinemaRoom\":{\"id\":0,\"roomName\":\"roomName\",\"vipPrice\":0.00,\"normalPrice\":0.00,\"seatQuantity\":0,\"movies\":[],\"seats\":[{\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"cinemaRoom\":{\"id\":0,\"roomName\":\"roomName\",\"vipPrice\":0.00,\"normalPrice\":0.00,\"seatQuantity\":0,\"movies\":[{\"cinemaRoom\":null,\"id\":0,\"actor\":\"actor\",\"content\":\"content\",\"director\":\"director\",\"duration\":0.0,\"fromDate\":\"2020-01-01\",\"toDate\":\"2020-01-01\",\"movieCompany\":\"movieCompany\",\"version\":\"version\",\"nameEng\":\"nameEng\",\"nameVN\":\"nameVN\",\"avatar\":\"avatar\",\"image\":\"image\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[],\"scheduleSeats\":[{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":null,\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[{\"movie\":null,\"scheduleSeat\":null,\"invoice\":null}]}]}}],\"typeMovies\":[{\"movie\":null,\"type\":{\"id\":0,\"name\":\"name\",\"typeMovies\":[]}}],\"tickets\":[{\"movie\":null,\"scheduleSeat\":{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":null}],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[]},\"invoice\":{\"id\":0,\"account\":{\"id\":0,\"email\":\"email\",\"fullName\":\"fullName\",\"gender\":\"gender\",\"identityCard\":\"identityCard\",\"image\":\"image\",\"username\":\"username\",\"password\":\"password\",\"phoneNumber\":\"phoneNumber\",\"dateOfBirth\":\"2018-12-31T17:00:00.000+00:00\",\"registerDate\":\"2020-01-01\",\"role\":{\"id\":0,\"roleName\":\"roleName\",\"accounts\":[]},\"status\":0,\"members\":[{\"memberId\":0,\"score\":0,\"account\":null}]},\"addScore\":0,\"bookingDate\":\"2018-12-31T17:00:00.000+00:00\",\"movieName\":\"movieName\",\"scheduleShow\":\"2020-01-01\",\"scheduleShowTime\":\"scheduleShowTime\",\"status\":0,\"totalMoney\":0.00,\"userScore\":0,\"seat\":\"seat\",\"tickets\":[],\"customerName\":\"customerName\",\"customerPhone\":\"customerPhone\",\"customerIdentityCard\":\"customerIdentityCard\",\"memberId\":\"memberId\",\"promotion\":{\"id\":0,\"detail\":\"detail\",\"discountLevel\":0.00,\"endTime\":\"2018-12-31T17:00:00.000+00:00\",\"image\":\"image\",\"startTime\":\"2018-12-31T17:00:00.000+00:00\",\"title\":\"title\",\"invoices\":[]},\"scheduleSeats\":[{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[]}]}}],\"scheduleSeats\":[{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":null}],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[{\"movie\":null,\"scheduleSeat\":null,\"invoice\":{\"id\":0,\"account\":{\"id\":0,\"email\":\"email\",\"fullName\":\"fullName\",\"gender\":\"gender\",\"identityCard\":\"identityCard\",\"image\":\"image\",\"username\":\"username\",\"password\":\"password\",\"phoneNumber\":\"phoneNumber\",\"dateOfBirth\":\"2018-12-31T17:00:00.000+00:00\",\"registerDate\":\"2020-01-01\",\"role\":{\"id\":0,\"roleName\":\"roleName\",\"accounts\":[]},\"status\":0,\"members\":[]},\"addScore\":0,\"bookingDate\":\"2018-12-31T17:00:00.000+00:00\",\"movieName\":\"movieName\",\"scheduleShow\":\"2020-01-01\",\"scheduleShowTime\":\"scheduleShowTime\",\"status\":0,\"totalMoney\":0.00,\"userScore\":0,\"seat\":\"seat\",\"tickets\":[],\"customerName\":\"customerName\",\"customerPhone\":\"customerPhone\",\"customerIdentityCard\":\"customerIdentityCard\",\"memberId\":\"memberId\",\"promotion\":{\"id\":0,\"detail\":\"detail\",\"discountLevel\":0.00,\"endTime\":\"2018-12-31T17:00:00.000+00:00\",\"image\":\"image\",\"startTime\":\"2018-12-31T17:00:00.000+00:00\",\"title\":\"title\",\"invoices\":[]},\"scheduleSeats\":[]}}]}]}],\"seats\":[{\"seatId\":null,\"seatColumn\":null,\"seatRow\":null,\"status\":null,\"seatType\":null,\"seatPrice\":null,\"cinemaRoom\":null}]}}]},\"id\":0,\"actor\":\"actor\",\"content\":\"content\",\"director\":\"director\",\"duration\":0.0,\"fromDate\":\"2020-01-01\",\"toDate\":\"2020-01-01\",\"movieCompany\":\"movieCompany\",\"version\":\"version\",\"nameEng\":\"nameEng\",\"nameVN\":\"nameVN\",\"avatar\":\"avatar\",\"image\":\"image\",\"scheduleMovies\":[],\"typeMovies\":[{\"movie\":null,\"type\":{\"id\":0,\"name\":\"name\",\"typeMovies\":[]}}],\"tickets\":[{\"movie\":null,\"scheduleSeat\":null,\"invoice\":{\"id\":0,\"account\":{\"id\":0,\"email\":\"email\",\"fullName\":\"fullName\",\"gender\":\"gender\",\"identityCard\":\"identityCard\",\"image\":\"image\",\"username\":\"username\",\"password\":\"password\",\"phoneNumber\":\"phoneNumber\",\"dateOfBirth\":\"2018-12-31T17:00:00.000+00:00\",\"registerDate\":\"2020-01-01\",\"role\":null,\"status\":0,\"members\":[]},\"addScore\":0,\"bookingDate\":\"2018-12-31T17:00:00.000+00:00\",\"movieName\":\"movieName\",\"scheduleShow\":\"2020-01-01\",\"scheduleShowTime\":\"scheduleShowTime\",\"status\":0,\"totalMoney\":0.00,\"userScore\":0,\"seat\":\"seat\",\"tickets\":[],\"customerName\":\"customerName\",\"customerPhone\":\"customerPhone\",\"customerIdentityCard\":\"customerIdentityCard\",\"memberId\":\"memberId\",\"promotion\":{\"id\":0,\"detail\":\"detail\",\"discountLevel\":0.00,\"endTime\":\"2018-12-31T17:00:00.000+00:00\",\"image\":\"image\",\"startTime\":\"2018-12-31T17:00:00.000+00:00\",\"title\":\"title\",\"invoices\":[]},\"scheduleSeats\":[]}}],\"scheduleSeats\":[]},\"schedule\":null}],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[{\"movie\":{\"cinemaRoom\":{\"id\":0,\"roomName\":\"roomName\",\"vipPrice\":0.00,\"normalPrice\":0.00,\"seatQuantity\":0,\"movies\":[],\"seats\":[{\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"cinemaRoom\":{\"id\":0,\"roomName\":\"roomName\",\"vipPrice\":0.00,\"normalPrice\":0.00,\"seatQuantity\":0,\"movies\":[{\"cinemaRoom\":null,\"id\":0,\"actor\":\"actor\",\"content\":\"content\",\"director\":\"director\",\"duration\":0.0,\"fromDate\":\"2020-01-01\",\"toDate\":\"2020-01-01\",\"movieCompany\":\"movieCompany\",\"version\":\"version\",\"nameEng\":\"nameEng\",\"nameVN\":\"nameVN\",\"avatar\":\"avatar\",\"image\":\"image\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[],\"scheduleSeats\":[{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":null,\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[{\"movie\":null,\"scheduleSeat\":null,\"invoice\":null}]}]}}],\"typeMovies\":[{\"movie\":null,\"type\":{\"id\":0,\"name\":\"name\",\"typeMovies\":[]}}],\"tickets\":[{\"movie\":null,\"scheduleSeat\":{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":null}],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[]},\"invoice\":{\"id\":0,\"account\":{\"id\":0,\"email\":\"email\",\"fullName\":\"fullName\",\"gender\":\"gender\",\"identityCard\":\"identityCard\",\"image\":\"image\",\"username\":\"username\",\"password\":\"password\",\"phoneNumber\":\"phoneNumber\",\"dateOfBirth\":\"2018-12-31T17:00:00.000+00:00\",\"registerDate\":\"2020-01-01\",\"role\":{\"id\":0,\"roleName\":\"roleName\",\"accounts\":[]},\"status\":0,\"members\":[{\"memberId\":0,\"score\":0,\"account\":null}]},\"addScore\":0,\"bookingDate\":\"2018-12-31T17:00:00.000+00:00\",\"movieName\":\"movieName\",\"scheduleShow\":\"2020-01-01\",\"scheduleShowTime\":\"scheduleShowTime\",\"status\":0,\"totalMoney\":0.00,\"userScore\":0,\"seat\":\"seat\",\"tickets\":[],\"customerName\":\"customerName\",\"customerPhone\":\"customerPhone\",\"customerIdentityCard\":\"customerIdentityCard\",\"memberId\":\"memberId\",\"promotion\":{\"id\":0,\"detail\":\"detail\",\"discountLevel\":0.00,\"endTime\":\"2018-12-31T17:00:00.000+00:00\",\"image\":\"image\",\"startTime\":\"2018-12-31T17:00:00.000+00:00\",\"title\":\"title\",\"invoices\":[]},\"scheduleSeats\":[{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[]}]}}],\"scheduleSeats\":[{\"scheduleSeatId\":0,\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":null}],\"scheduleSeats\":[]},\"seatId\":0,\"seatColumn\":\"seatColumn\",\"seatRow\":0,\"status\":0,\"seatType\":0,\"seatPrice\":0.00,\"tickets\":[{\"movie\":null,\"scheduleSeat\":null,\"invoice\":{\"id\":0,\"account\":{\"id\":0,\"email\":\"email\",\"fullName\":\"fullName\",\"gender\":\"gender\",\"identityCard\":\"identityCard\",\"image\":\"image\",\"username\":\"username\",\"password\":\"password\",\"phoneNumber\":\"phoneNumber\",\"dateOfBirth\":\"2018-12-31T17:00:00.000+00:00\",\"registerDate\":\"2020-01-01\",\"role\":{\"id\":0,\"roleName\":\"roleName\",\"accounts\":[]},\"status\":0,\"members\":[]},\"addScore\":0,\"bookingDate\":\"2018-12-31T17:00:00.000+00:00\",\"movieName\":\"movieName\",\"scheduleShow\":\"2020-01-01\",\"scheduleShowTime\":\"scheduleShowTime\",\"status\":0,\"totalMoney\":0.00,\"userScore\":0,\"seat\":\"seat\",\"tickets\":[],\"customerName\":\"customerName\",\"customerPhone\":\"customerPhone\",\"customerIdentityCard\":\"customerIdentityCard\",\"memberId\":\"memberId\",\"promotion\":{\"id\":0,\"detail\":\"detail\",\"discountLevel\":0.00,\"endTime\":\"2018-12-31T17:00:00.000+00:00\",\"image\":\"image\",\"startTime\":\"2018-12-31T17:00:00.000+00:00\",\"title\":\"title\",\"invoices\":[]},\"scheduleSeats\":[]}}]}]}],\"seats\":[{\"seatId\":null,\"seatColumn\":null,\"seatRow\":null,\"status\":null,\"seatType\":null,\"seatPrice\":null,\"cinemaRoom\":null}]}}]},\"id\":0,\"actor\":\"actor\",\"content\":\"content\",\"director\":\"director\",\"duration\":0.0,\"fromDate\":\"2020-01-01\",\"toDate\":\"2020-01-01\",\"movieCompany\":\"movieCompany\",\"version\":\"version\",\"nameEng\":\"nameEng\",\"nameVN\":\"nameVN\",\"avatar\":\"avatar\",\"image\":\"image\",\"scheduleMovies\":[{\"movie\":null,\"schedule\":{\"id\":0,\"time\":\"time\",\"scheduleMovies\":[],\"scheduleSeats\":[]}}],\"typeMovies\":[{\"movie\":null,\"type\":{\"id\":0,\"name\":\"name\",\"typeMovies\":[]}}],\"tickets\":[],\"scheduleSeats\":[]},\"scheduleSeat\":null,\"invoice\":{\"id\":0,\"account\":{\"id\":0,\"email\":\"email\",\"fullName\":\"fullName\",\"gender\":\"gender\",\"identityCard\":\"identityCard\",\"image\":\"image\",\"username\":\"username\",\"password\":\"password\",\"phoneNumber\":\"phoneNumber\",\"dateOfBirth\":\"2018-12-31T17:00:00.000+00:00\",\"registerDate\":\"2020-01-01\",\"role\":{\"id\":0,\"roleName\":\"roleName\",\"accounts\":[]},\"status\":0,\"members\":[{\"memberId\":0,\"score\":0,\"account\":null}]},\"addScore\":0,\"bookingDate\":\"2018-12-31T17:00:00.000+00:00\",\"movieName\":\"movieName\",\"scheduleShow\":\"2020-01-01\",\"scheduleShowTime\":\"scheduleShowTime\",\"status\":0,\"totalMoney\":0.00,\"userScore\":0,\"seat\":\"seat\",\"tickets\":[],\"customerName\":\"customerName\",\"customerPhone\":\"customerPhone\",\"customerIdentityCard\":\"customerIdentityCard\",\"memberId\":\"memberId\",\"promotion\":{\"id\":0,\"detail\":\"detail\",\"discountLevel\":0.00,\"endTime\":\"2018-12-31T17:00:00.000+00:00\",\"image\":\"image\",\"startTime\":\"2018-12-31T17:00:00.000+00:00\",\"title\":\"title\",\"invoices\":[]},\"scheduleSeats\":[]}}]}]";
        assertEquals(HttpStatus.OK.value(), response.getStatus());
//        assertEquals(expectedResult, response.getContentAsString());
    }
    /** This function find seat solid (Seat is booked by customer) to show status for other customer is know the seat is booked
     * Result: The test is pass, because at time seats is not booked, all seats can choose, function return list empty
     * @throws Exception
     */
    @Test
    void testCheckBookingSeat_ScheduleSeatServiceReturnsNoItems() throws Exception {
        // Setup
        when(mockScheduleSeatService.getAllSeatBooking(LocalDate.of(2020, 1, 1), 0, 0)).thenReturn(Collections.emptyList());

        // Run the test
        final MockHttpServletResponse response = mockMvc.perform(get("/api/scheduleSeat/checkBooking/2020-01-01/0/0")
                .accept(MediaType.APPLICATION_JSON))
                .andReturn().getResponse();

        // Verify the results
        assertEquals(HttpStatus.OK.value(), response.getStatus());
        assertEquals("[]", response.getContentAsString());
    }
}
